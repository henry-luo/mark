<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript API - Mark Notation</title>
    <meta name="description" content="Complete reference for the Mark.js JavaScript API and methods">
    
    <!-- CSS -->
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/variables.css">
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/layout.css">
    <link rel="stylesheet" href="./css/jekyll-theme.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>&lt; &gt;</text></svg>">
</head>
<body class="layout-page">
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav__container">
            <div class="nav__brand">
                <a href="./index-preview.html" class="nav__logo">
                    <span class="nav__logo-icon">&lt;</span>
                    <span class="nav__logo-text" style="margin-left:-3px; margin-right:-5px;">Mark</span>
                    <span class="nav__logo-icon">&gt;</span>
                </a>
            </div>
            
            <div class="nav__menu">
                <a href="./index-preview.html#features" class="nav__link">Features</a>
                <a href="./index-preview.html#syntax" class="nav__link">Syntax</a>
                <a href="./syntax-preview.html" class="nav__link">Documentation</a>
                <a href="./index-preview.html#examples" class="nav__link">Examples</a>
                <a href="https://github.com/henry-luo/mark" class="nav__link nav__link--external" target="_blank">GitHub</a>
            </div>
            
            <div class="nav__actions">
                <a href="./syntax-preview.html" class="btn btn--primary">Get Started</a>
            </div>
        </div>
    </nav>

    <!-- Main Layout -->
    <div class="main-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar__content">
                <h3 class="sidebar__title">Documentation</h3>
                <nav class="sidebar__nav">
                    <ul class="sidebar__menu">
                        <li class="sidebar__menu-item">
                            <a href="./syntax-preview.html" class="sidebar__link ">
                                Mark Syntax
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="./data-model-preview.html" class="sidebar__link ">
                                Data Model
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="./api-preview.html" class="sidebar__link sidebar__link--active">
                                JavaScript API
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="./faq-preview.html" class="sidebar__link ">
                                FAQ
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="./grammar-preview.html" class="sidebar__link ">
                                Grammar Reference
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content content--with-sidebar">
            <div class="content__header">
                <h1 class="content__title">JavaScript API</h1>
                <p class="content__description">Complete reference for the Mark.js JavaScript API and methods</p>
            </div>
            
            <div class="content__body">
                <br>
<h2>Core API</h2>
<br>
<p>Mark object constructor:</p>
<br>
<p>- <code>Mark(source)</code>: shorthand for <code>Mark.parse(source)</code>. <code>source</code> parameter must start with '<', '{' or '[' or '('.</p>
<p>- <code>Mark(type_name, properties, contents)</code>: Mark object constructor takes 3 parameters, except <code>type_name</code>, the other 2 are optional.</p>
<p>  - <code>type_name</code>: a string. It must not start with '{'.</p>
<p>  - <code>properties</code>: a JSON object containing name-value pairs. Numeric property keys are ignored.</p>
<p>  - <code>contents</code>: an array of content objects. Null values are skipped, primitive values are converted into strings, arrays will be flattened, and consecutive strings will be merged into one.</p>
<br>
<p>The constructed Mark object is just a simple POJO. So basically:</p>
<br>
<p>- <code>type_name</code>: can be accessed through <code>markObj.constructor.name</code>.</p>
<p>- <code>properties</code>: can be accessed through <code>markObj.prop</code> or <code>markObj['prop']</code> when <code>prop</code> is not a proper JS identifier. You can also use JS <code>for ... in</code> loop to iterate through the properties. Unlike normal JS array, Mark object has been specially constructed so that Mark contents are not enumerable, thus do not appear in <code>for ... in</code> loop.</p>
<p>- <code>contents</code>: can be accessed through <code>markObj[index]</code>. You can also use JS <code>for ... of</code> loop to iterate through the content items.</p>
<br>
<p>Besides the above POJO behaviors, there are some additional prototype functions defined to work with the data model:</p>
<br>
<p>- <code>.length</code>: when <code>length</code> property is not defined on the object, it returns the number of content items stored in the Mark object; otherwise, it returns the value of the <code>length</code> property. You can use <code>Mark.lengthOf()</code> to get the content length, when <code>length</code> property is defined on the object.</p>
<p>- <code>.contents()</code>: returns the list of content items stored in the Mark object.</p>
<p>- <code>.parent()</code>: returns the parent object of current Mark object.</p>
<p>- <code>.source(options)</code>: shorthand for stringifying current Mark object.</p>
<p>- <code>.text()</code>: returns a string, which is the concatenation of all descendant text content items.</p>
<br>
<p>As Mark object is array-like, most functional JS code that works with array-like data, can be work with Mark object without change. The following API functions are directly mapped to those from <code>Array.prototype</code>.</p>
<br>
<p>- <code>.filter(callback, thisArg)</code>: mapped to JS <code>Array.prototype.filter</code>.</p>
<p>- <code>.map(callback, thisArg)</code>: mapped to JS <code>Array.prototype.map</code>.</p>
<p>- <code>.reduce(callback)</code>: mapped to JS <code>Array.prototype.reduce</code>.</p>
<p>- <code>.every(callback, thisArg)</code>: mapped to JS <code>Array.prototype.every</code>.</p>
<p>- <code>.some(callback, thisArg)</code>: mapped to JS <code>Array.prototype.some</code>.</p>
<p>- <code>.each(callback, thisArg)</code>: mapped to JS <code>Array.prototype.forEach</code>.</p>
<p>- <code>.forEach(callback, thisArg)</code>: mapped to JS <code>Array.prototype.forEach</code>.</p>
<p>- <code>.includes(searchElement, fromIndex)</code>: mapped to JS <code>Array.prototype.includes</code>.</p>
<p>- <code>.indexOf(searchElement, fromIndex)</code>: mapped to JS <code>Array.prototype.indexOf</code>.</p>
<p>- <code>.lastIndexOf(callback, thisArg)</code>: mapped to JS <code>Array.prototype.lastIndexOf</code>.</p>
<p>- <code>.slice(begin, end)</code>: mapped to JS <code>Array.prototype.slice</code>.</p>
<br>
<p>When these API functions are overridden by properties of same name, you can still call them from the <code>Mark.prototype</code>, e.g.<code>Mark.prototype.contents.call(markObj)</code>.</p>
<br>
<h2>Static API</h2>
<br>
<p>There are a few important API functions defined on the static Mark object:</p>
<br>
<p>- <code>Mark.lengthOf(markObj)</code>: returns the content length of a Mark object.</p>
<p>- <code>Mark.parse('string', options)</code>: parses a string into Mark object. It takes an optional parameter <code>options</code>.</p>
<p>- <code>Mark.stringify(markObj, options)</code>: serialize the Mark object back into string. It takes an optional parameter <code>options</code>.</p>
<p>  - <code>options.space</code>: may be used to control spacing in the final string. If it is a number, successive levels in the stringification will each be indented by this many space characters (up to 10). If it is a string, successive levels will be indented by this string (or the first 10 characters of it).</p>
<br>
<p>Mark does not support <code>reviver</code> function defined in <code>JSON.parse()</code>, and <code>replacer</code> function defined in <code>JSON.stringify()</code>. They are not structured nor secure way to serialize and deserialize custom data types.</p>
<br>
<h2>Mutative API</h2>
<br>
<p>Mutative API functions are now separated into its own sub-module <code>mark.mutate.js</code>, which allows this part to be easily excluded from the package, if Mark is used in a pure functional manner.</p>
<br>
<p>The mutative API functions defined on a Mark object are:</p>
<br>
<p>- <code>.set(key, value)</code>: if the <code>key</code> is numeric, then it sets the indexed content item of the Mark object; otherwise, it sets a named property of the Mark object. </p>
<p>- <code>.push(item, ...)</code>: pushes item(s) at the end of the contents of current Mark object. However, unlike JS <code>Array.prototype.push</code>, which returns the new array length, this function returns the current this object, so that the function call can be chained.</p>
<p>- <code>.pop()</code>: pop an item from the end of contents.</p>
<p>- <code>.splice(index, cnt, item, ...)</code>: remove <code>cnt</code> of items starting at the <code>index</code>, and then insert given item(s), similar to <code>Array.splice(...)</code>.</p>
<br>
<p>The mutative API function defined on a Mark pragma:</p>
<br>
<p>- <code>.set(value)</code>: sets the content in the pragma, and returns the pragma itself.</p>
<br>
<h2>Converter API</h2>
<br>
<p>These are additional prototype functions implemented in <code>mark.converter.js</code>, for mapping Mark into other formats:</p>
<br>
<p>- <code>markObj.html(options)</code>: serializes the Mark object into HTML. <code>options</code> parameter is same as that of <code>Mark.stringify()</code>.</p>
<p>- <code>markObj.xml(options)</code>: serializes the Mark object into XML.  <code>options</code> parameter is same as that of <code>Mark.stringify()</code>.</p>
<br>
<h2>Selector API</h2>
<br>
<p>These are additional prototype functions implemented in <code>mark.selector.js</code>, for processing the constructed data model using special selectors, like CSS selector:</p>
<br>
<p>- <code>markObj.matches('selector')</code>: returns whether the <code>markObj</code> matches the given CSS <code>selector</code>.</p>
<p>- <code>markObj.find('selector')</code>: returns child or descendent content objects that matches the given CSS <code>selector</code>.</p>
            </div>
        </main>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__container">
            <div class="footer__content">
                <div class="footer__brand">
                    <div class="footer__logo">
                        <span class="footer__logo-icon">&lt;</span>
                        <span class="footer__logo-text">Mark</span>
                        <span class="footer__logo-icon">&gt;</span>
                    </div>
                    <p class="footer__description">
                        A unified notation for both object and markup data.
                    </p>
                </div>
                
                <div class="footer__links">
                    <div class="footer__column">
                        <h4 class="footer__column-title">Documentation</h4>
                        <ul class="footer__column-links">
                            <li><a href="./syntax-preview.html">Syntax</a></li>
                            <li><a href="./data-model-preview.html">Data Model</a></li>
                            <li><a href="./api-preview.html">JavaScript API</a></li>
                            <li><a href="./faq-preview.html">FAQ</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer__column">
                        <h4 class="footer__column-title">Resources</h4>
                        <ul class="footer__column-links">
                            <li><a href="https://github.com/henry-luo/mark" target="_blank">GitHub</a></li>
                            <li><a href="https://www.npmjs.com/package/mark-js" target="_blank">npm Package</a></li>
                            <li><a href="./grammar-preview.html">Grammar Reference</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="footer__bottom">
                <p class="footer__copyright">
                    © 2025 Mark Notation. Released under the MIT License.
                </p>
            </div>
        </div>
    </footer>
</body>
</html>
